
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>384</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="28f7a645-075a-4772-b7b9-f804756636ba">A 7-year-old boy is brought to
                                        the office due to swelling of the hands and feet.  Two weeks ago, the patient
                                        was treated for anaphylaxis following a bee sting.  During the past 10 days, he
                                        has had progressive hand and foot swelling, and his pants feel tighter than
                                        usual.  The patient's urine has also become frothy.  Examination shows
                                        periorbital edema and pitting edema of the hands and feet, as well as mild
                                        ascites.  Lungs are clear to auscultation.  Urinalysis results are as follows:
                                    </p>
<table class="simple-table" id="c1dc2c6c-13bd-485f-b5fa-16dd10f088b0">
<tbody>
<tr id="3f0429a5-7282-44c7-b10f-edc0b5bc7924">
<td class="" id="~=@v">Protein</td>
<td class="" id="QtK?">+4</td>
</tr>
<tr id="ba3f2eb1-a4e9-450e-aa7d-4a4f11f8fe03">
<td class="" id="~=@v">Blood</td>
<td class="" id="QtK?">negative</td>
</tr>
<tr id="d1e34b3c-7743-46a9-9025-502105dbc6c5">
<td class="" id="~=@v">Glucose</td>
<td class="" id="QtK?">negative</td>
</tr>
<tr id="916992ab-a9b4-4751-afc6-fd181f23358a">
<td class="" id="~=@v">Ketones</td>
<td class="" id="QtK?">negative</td>
</tr>
<tr id="0fdb6ccd-3353-49f0-8e6d-014b30455bbd">
<td class="" id="~=@v">White blood cells</td>
<td class="" id="QtK?">1-2/hpf</td>
</tr>
<tr id="e409bb40-626e-460d-8751-f1484e851714">
<td class="" id="~=@v">Red blood cells</td>
<td class="" id="QtK?">1-2/hpf</td>
</tr>
<tr id="66ca02a6-3f70-446e-a03d-39df3f33a8ca">
<td class="" id="~=@v">Casts</td>
<td class="" id="QtK?">hyaline casts</td>
</tr>
</tbody>
</table>
<p class="" id="9ce0012b-49f7-4e7f-8e97-7da0ab58d45f">Biopsy of this patient's
                                        kidneys would most likely show which of the following microscopy findings?</p>
<table class="simple-table" id="e4d4a313-c19e-40b4-b3ab-90d3593d1c80">
<tbody>
<tr id="1f34c4a3-c440-4b3c-b9dd-9775f661bf8f">
<td class="" id="{pxT"></td>
<td class="" id="MfM&lt;"><strong>Light Microscopy</strong></td>
<td class="" id="ZzA]"><strong>Immunofluorescence</strong></td>
<td class="" id="O&lt;Hm"><strong>Electron Microscopy</strong></td>
</tr>
<tr id="7d20af35-4e2c-4b73-a275-e29c32bfb2ae">
<td class="" id="{pxT">A</td>
<td class="" id="MfM&lt;">Cellular proliferation in segmental areas</td>
<td class="" id="ZzA]">Globular deposits of IgA</td>
<td class="" id="O&lt;Hm">Mesangial deposits</td>
</tr>
<tr id="464cf1fa-cdd1-4ec8-b193-46a29b0d3aee">
<td class="" id="{pxT">B</td>
<td class="" id="MfM&lt;">Cellular proliferation with increased
                                                    neutrophils in capillaries</td>
<td class="" id="ZzA]">Granular deposits of complement and IgG</td>
<td class="" id="O&lt;Hm">Subepithelial deposits</td>
</tr>
<tr id="5fdf9943-dfd4-4883-a5cc-6d50b974f61e">
<td class="" id="{pxT">C</td>
<td class="" id="MfM&lt;">Crescent formation</td>
<td class="" id="ZzA]">Linear deposits of IgG</td>
<td class="" id="O&lt;Hm">Negative for deposits</td>
</tr>
<tr id="16e12a75-f2c1-4816-b099-ec75c7c33bea">
<td class="" id="{pxT">D</td>
<td class="" id="MfM&lt;">Diffuse thickening of glomerular basement
                                                    membrane</td>
<td class="" id="ZzA]">Granular deposits of complement and IgG</td>
<td class="" id="O&lt;Hm">Subepithelial deposits</td>
</tr>
<tr id="9da260d5-f449-4c26-9522-0cc254026880">
<td class="" id="{pxT">E</td>
<td class="" id="MfM&lt;">Normal histology</td>
<td class="" id="ZzA]">Negative for complement and IgG</td>
<td class="" id="O&lt;Hm">Effacement of podocytes</td>
</tr>
</tbody>
</table>
<ul class="toggle" id="3cd2f94d-ca01-47d1-9870-0df23cd7b0ef">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="531cd611-4d45-4705-8369-f695cb5c39d8">
<tbody>
<tr id="95c6a702-7d31-4dd7-ba5b-bbee27809306">
<td class="" id="yJ=@">Light
                                                                microscopyImmunofluorescenceElectron microscopy</td>
<td class="" id="VyBF"></td>
<td class="" id="cFkP"></td>
</tr>
<tr id="b5c3e417-7fb3-4960-9ce3-f9dcdde1d0b7">
<td class="" id="yJ=@">A.</td>
<td class="" id="VyBF">Cellular proliferation in segmental
                                                                areasGlobular deposits of IgAMesangial deposits<br/>
                                                                (5%)<br/></td>
<td class="" id="cFkP"></td>
</tr>
<tr id="5dfa1d7d-80e3-4b23-826d-5c66d56c4d6d">
<td class="" id="yJ=@">B.</td>
<td class="" id="VyBF">Cellular proliferation with increased
                                                                neutrophils in capillariesGranular deposits of
                                                                complement and IgGSubepithelial deposits<br/>
                                                                (5%)<br/></td>
<td class="" id="cFkP"></td>
</tr>
<tr id="16740a94-8abb-41cb-9977-d24b24740e9c">
<td class="" id="yJ=@">C.</td>
<td class="" id="VyBF">Crescent formationLinear deposits of
                                                                IgGNegative for deposits<br/> (2%)<br/></td>
<td class="" id="cFkP"></td>
</tr>
<tr id="5ff8adf4-5917-4cd3-b58f-02f1d2a7f9e4">
<td class="" id="yJ=@">D.</td>
<td class="" id="VyBF">Diffuse thickening of glomerular
                                                                basement membraneGranular deposits of complement and
                                                                IgGSubepithelial deposits<br/> (8%)<br/></td>
<td class="" id="cFkP"></td>
</tr>
<tr id="1d516cee-5d0a-4851-8142-2b8fe13f3c76">
<td class="" id="yJ=@">E.</td>
<td class="" id="VyBF">Normal histologyNegative for
                                                                complement and IgGEffacement of podocytes<br/>
                                                                (77%)<br/></td>
<td class="" id="cFkP"></td>
</tr>
</tbody>
</table>
<p class="" id="4b1c5908-4245-4047-8096-da36ce376ec6">Incorrect</p>
<p class="" id="69617e69-ebcf-455f-b5f7-852a31b759bb">Correct answer E
                                                </p>
<p class="" id="a575c904-8665-4507-94ee-6503cdfdac9e">77%Answered
                                                    correctly</p>
<p class="" id="f590e9fd-bbc2-4e3f-893a-3e1ce023c955">38 secsTime Spent
                                                </p>
<p class="" id="1233eb15-2699-409a-9f9e-3e5a19e6901d">2024Version</p>
<ul class="bulleted-list" id="20ef0eee-c5ac-49ba-b47b-f6c05fa24e48">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="df1d8030-6f4c-4ca3-bc37-b2632cc4cf56">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="17ce2469-951b-4a56-86dd-c0b38e1b5fc4"><a href="https://lh7-us.googleusercontent.com/JpEuMgfRrmvvlk3HLkFtJma0UYcWV_s87dNRTgCcNO2P5GfGM57omRmOVSxuqCzC6LCjXnqH5u7_Ke2ujuOXhA2f_mbpbLEmvu4f6N4RuCiJYUwA69BRQ1A2YNRB_YwnI-orBtF8Qn9MPNsMX1aNkRk"><img loading="lazy" src="https://lh7-us.googleusercontent.com/JpEuMgfRrmvvlk3HLkFtJma0UYcWV_s87dNRTgCcNO2P5GfGM57omRmOVSxuqCzC6LCjXnqH5u7_Ke2ujuOXhA2f_mbpbLEmvu4f6N4RuCiJYUwA69BRQ1A2YNRB_YwnI-orBtF8Qn9MPNsMX1aNkRk" style="width:602px"/></a>
</figure>
<p class="" id="6d1c9c80-fe77-42e8-a0f5-759224e72a52">This pediatric
                                                    patient developed nephrotic syndrome (ie, generalized edema,
                                                    hyperlipidemia, hypoalbuminemia, massive proteinuria with resultant
                                                    "frothy" urine) after a bee sting.  This presentation
                                                    suggests minimal change disease (MCD), the most common cause of
                                                    nephrotic syndrome in young children.  MCD is often idiopathic but
                                                    can occur after an inciting event, including respiratory infections,
                                                    immunizations, or insect sting/bite.  Subsequent T-cell dysfunction
                                                    leads to the production of a glomerular permeability factor
                                                    (possibly IL-13) which damages podocytes and decreases the anionic
                                                    properties of the glomerular basement membrane (GBM).  Loss of
                                                    negative charge results in the selective loss of albumin in the
                                                    urine, which causes hypoalbuminemia and edema.</p>
<p class="" id="e2b84076-b70c-45ee-bf7e-f541a874d4f5">Most children with
                                                    MCD can be diagnosed presumptively based on clinical presentation,
                                                    and renal biopsy is usually unnecessary.  If biopsy is performed,
                                                    light microscopy (LM) shows normal glomeruli, and no immunoglobulin
                                                    or complement deposits are seen with immunofluorescent staining. 
                                                    However, electron microscopy (EM) shows diffuse podocyte foot
                                                    process effacement and fusion.  These abnormal findings are
                                                    generally reversible after corticosteroid therapy, and most children
                                                    experience rapid resolution with an excellent long-term prognosis.
                                                </p>
<p class="" id="e0bc1728-8975-441a-b773-5f6564277c7f">(Choice A)  IgA
                                                    nephropathy presents with nephritic syndrome; patients typically
                                                    develop marked hematuria with red blood cell casts on urinalysis. 
                                                    Deposits of IgA are noted in the mesangium on EM and
                                                    immunofluorescence microscopy (IF), whereas LM demonstrates
                                                    resultant glomerular hypercellularity in affected segments.</p>
<p class="" id="a8a91e58-723c-4c0f-ae2a-cebe1b273c9b">(Choice B) 
                                                    Poststreptococcal glomerulonephritis is a nephritic syndrome that
                                                    typically occurs 2-4 weeks after infection with group A
                                                    Streptococcus.  LM demonstrates hypercellular glomeruli, whereas IF
                                                    shows a "lumpy-bumpy" pattern of granular IgG and C3
                                                    deposition on the GBM.  EM also demonstrates subepithelial immune
                                                    complex deposits.</p>
<p class="" id="1c27d482-78c1-42ba-98a1-f78701941e57">(Choice C) 
                                                    Antiglomerular basement membrane disease causes a linear deposition
                                                    of IgG and C3 on the GBM; it typically results in a crescentic
                                                    glomerulonephritis (eg, nephritic syndrome; hematuria, red blood
                                                    cell casts) visible on LM.  EM demonstrates breakage of the GBM, but
                                                    immune complex deposits are absent.</p>
<p class="" id="76851a47-8b80-45b3-852d-783fa07b4499">(Choice D) 
                                                    Membranous nephropathy causes a nephrotic syndrome but is rarer in
                                                    children; it is often associated with viral hepatitis, solid tumors,
                                                    or lupus.  LM reveals diffuse GBM thickening, which is due to the
                                                    granular deposition of immune complexes (IgG and C3); EM
                                                    demonstrates subepithelial deposits.</p>
<p class="" id="8511a397-f594-4baf-82da-fc3a3e3f10a3">Educational
                                                    objective:</p>
<p class="" id="647e9d7d-40af-4107-b461-c1fa7b29c859">Minimal change
                                                    disease is the most common cause of nephrotic syndrome in children. 
                                                    Classic manifestations include proteinuria, hypoalbuminemia, and
                                                    edema that are usually reversible with corticosteroids.  The
                                                    principal lesion is a diffuse foot process effacement that can be
                                                    seen on electron microscopy.  Light and immunofluorescence
                                                    microscopy are normal.</p>
<p class="" id="76571392-6bf8-49b1-bf4d-1ff7c4111e4b">Pathology</p>
<p class="" id="2ef0ba22-b867-46e8-b8b5-1b40b7f5443b">Subject</p>
<p class="" id="4ad5f863-19b9-4943-8e8f-bfa86a2ac62a">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="7b3ced54-7d46-40df-8b8e-ce9759edf70c">System</p>
<p class="" id="b12f6dc5-d556-4202-b7bb-d8644a0182d1">Glomerular
                                                    disorders</p>
<p class="" id="b2ef758f-333d-4356-9e02-ff94f1f22063">Topic</p>
<p class="" id="4818968b-979b-4649-a8f9-d6918c3d3c0e">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="8f50ddbd-df25-47f9-bd61-cfa910432bd1">New</p>
<p class="" id="d3fda724-cc43-40ea-83dc-db1f19731432">Existing</p>
<p class="" id="5d5c8f92-6b93-48e7-ae38-66215a7d45a3">Notebook</p>
<p class="" id="e554f0dc-972b-47a9-a04f-b6fc11991c78">My Notebook</p>
<p class="" id="a9276b3c-6696-4aab-94d2-0a3b007a16da">0</p>
<p class="" id="c77fa841-bef6-4d6e-9cda-8a4b3c982c37">Flashcards</p>
<p class="" id="3952fa9b-9bfe-459a-97b0-87ddd3fef209">Feedback</p>
<p class="" id="3122b387-4a7c-4e64-9e94-cb8fcd750b12">Suspend</p>
<p class="" id="24f104d5-681e-42ad-b97e-423509ad2768">End Block</p>
<p class="" id="b764c15b-f4d4-4e8e-ac2d-659e411792fc">‚ú®Done</p>
<p class="" id="516b30bb-7c67-4f1e-bb8f-ae28a5cd1633">Exhibit Display
                                                </p>
<figure class="image" id="b800d5f7-3997-4d3e-9304-3aa564cd8540"><a href="https://lh7-us.googleusercontent.com/Pnv99zc61E83wcaQ6FMPJAkNyGyREE168RPX7F1JzY-NFgGsvpKCKozdsSupB0lDpmWYEpVo3TJ_1NPcyceuxR__KA6aMyJhIvEB_3nQVZ8noUH79euvFUE1FBHCUPZBBYLt8Dume_jJVDYtNoQhU3A"><img loading="lazy" src="https://lh7-us.googleusercontent.com/Pnv99zc61E83wcaQ6FMPJAkNyGyREE168RPX7F1JzY-NFgGsvpKCKozdsSupB0lDpmWYEpVo3TJ_1NPcyceuxR__KA6aMyJhIvEB_3nQVZ8noUH79euvFUE1FBHCUPZBBYLt8Dume_jJVDYtNoQhU3A" style="width:580px"/></a>
</figure>
<p class="" id="a296e537-aef9-48df-8516-d1be486c89a2">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="d4c4992c-8902-4cc2-b951-e80005496bcb">ExistingMy
                                                    Notebook</p>
<p class="" id="83e3fc4d-1e44-432c-ba5a-d5ec904345f7">Exhibit Display
                                                </p>
<figure class="image" id="c0c61425-7eff-48b1-9a2d-633ae16390ce"><a href="https://lh7-us.googleusercontent.com/IkKW3K5tssJ8wwFhiQL9yccaRqvhL0zHgckcw-r96AmIxv4Xc5q2ylxrr-E8pqOeHg5qelW9GDEkIT4algbmvKzszbO0HzF0rgAo5poujpNcdwZDj3IEGa66dzRHYlAVXuTXd51da_IEBKhL6ag9eRE"><img loading="lazy" src="https://lh7-us.googleusercontent.com/IkKW3K5tssJ8wwFhiQL9yccaRqvhL0zHgckcw-r96AmIxv4Xc5q2ylxrr-E8pqOeHg5qelW9GDEkIT4algbmvKzszbO0HzF0rgAo5poujpNcdwZDj3IEGa66dzRHYlAVXuTXd51da_IEBKhL6ag9eRE" style="width:602px"/></a>
</figure>
<p class="" id="ec21d72b-b929-4031-997d-97c300b8dcbc">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="8d9fd43b-f3c6-4f0e-8c0b-c060bce54bde">ExistingMy
                                                    Notebook</p>
<p class="" id="a56bc851-c201-4e61-b6c5-72ea6c9bb880">Exhibit Display
                                                </p>
<figure class="image" id="952127b8-6d06-4c20-8b36-9a140ce6483a"><a href="https://lh7-us.googleusercontent.com/RQJ3z88RXR96I9s4PrBIhDQ_-ixvyhoUwK_IQPGfrPLAeXKAYLKiuQhrYMsZ7RvzKUXtFvKx7D0xpiPbGAovrma2NVzX7qUmVKBwN8DYx2_26Sv0mzE2uHT1BGHqnx1eLWm9sQ5Rzmz41QwpY1Fppbc"><img loading="lazy" src="https://lh7-us.googleusercontent.com/RQJ3z88RXR96I9s4PrBIhDQ_-ixvyhoUwK_IQPGfrPLAeXKAYLKiuQhrYMsZ7RvzKUXtFvKx7D0xpiPbGAovrma2NVzX7qUmVKBwN8DYx2_26Sv0mzE2uHT1BGHqnx1eLWm9sQ5Rzmz41QwpY1Fppbc" style="width:602px"/></a>
</figure>
<p class="" id="8642c055-ed10-4e18-abbb-914cf5bf9f47">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="7319d9dd-a827-47d8-bb18-f3cfe5755e60">ExistingMy
                                                    Notebook</p>
<p class="" id="dabc065c-2a06-4cd8-878b-61806f987fef">Exhibit Display
                                                </p>
<figure class="image" id="777f2594-0cac-4d55-9f56-20dd7159ef81"><a href="https://lh7-us.googleusercontent.com/GePID9RlloiZn5V8z0pJN1xvGVv8vG5quQHdF2JJNQUwatP8dXRibit0AJEqy0I6MTRkGXSGk3cPgK8JcqRbV9K2-5Ctb0rtSzPtVfrpcTYiVmnlZd4hYDY8WiYWUGbsr9g3uWBkMlcSsKAl82N27rg"><img loading="lazy" src="https://lh7-us.googleusercontent.com/GePID9RlloiZn5V8z0pJN1xvGVv8vG5quQHdF2JJNQUwatP8dXRibit0AJEqy0I6MTRkGXSGk3cPgK8JcqRbV9K2-5Ctb0rtSzPtVfrpcTYiVmnlZd4hYDY8WiYWUGbsr9g3uWBkMlcSsKAl82N27rg" style="width:602px"/></a>
</figure>
<p class="" id="ea71bb2b-2d0e-464e-b4b2-1bca28ffc9cb">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="ab985b32-811d-4119-9b60-85624c18932a">ExistingMy
                                                    Notebook</p>
<p class="" id="ad69e07a-30cb-4661-91f9-a43c141f86b0">Exhibit Display
                                                </p>
<figure class="image" id="6fb49b32-09e1-4519-a379-36e6316f6bb1"><a href="https://lh7-us.googleusercontent.com/5Jj4nzsRZZ0-UXXsUa0GzrRgnj74aLO431NQdVig54YxSCaw5AOKnCst9iFqjcxqFnebTOVLrCOu_07mWnKFW7DKd2W21xRMxSxxk7vUGmQPVToyQP5ywF64JOB-3zNE0xU4bBj5aWf1iTB9XFUxAgw"><img loading="lazy" src="https://lh7-us.googleusercontent.com/5Jj4nzsRZZ0-UXXsUa0GzrRgnj74aLO431NQdVig54YxSCaw5AOKnCst9iFqjcxqFnebTOVLrCOu_07mWnKFW7DKd2W21xRMxSxxk7vUGmQPVToyQP5ywF64JOB-3zNE0xU4bBj5aWf1iTB9XFUxAgw" style="width:602px"/></a>
</figure>
<p class="" id="f5d8ff21-58df-4f9d-803c-d1205c58135e">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="f2e6218b-6fbc-4023-99d6-9269a1d56655">ExistingMy
                                                    Notebook</p>
<p class="" id="255ae69d-e39a-4c76-be20-3ee9a7924717">Exhibit Display
                                                </p>
<figure class="image" id="2eb1b00d-55cb-41b8-bb7c-571d7a3a477f"><a href="https://lh7-us.googleusercontent.com/LxsnTErg3H3FZAxPaG0AzJUU7PpeK6x4v6uo_IkYMoDXMe5HATx52I1KtC6XvjUzatt2nohfBK9RQ-rDygtywGwd6VhobitkPgzimWw-1ZSPFpENx-FclCQ3pxkR-5l-xb_YGCGQEzawnG4rbhcWpNQ"><img loading="lazy" src="https://lh7-us.googleusercontent.com/LxsnTErg3H3FZAxPaG0AzJUU7PpeK6x4v6uo_IkYMoDXMe5HATx52I1KtC6XvjUzatt2nohfBK9RQ-rDygtywGwd6VhobitkPgzimWw-1ZSPFpENx-FclCQ3pxkR-5l-xb_YGCGQEzawnG4rbhcWpNQ" style="width:602px"/></a>
</figure>
<p class="" id="5dd41712-ea0a-4bb1-abb5-73f14828ad61">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="e30d734c-0f7d-4518-abb1-3ac8344807fd">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }


    


    

    /* Adjust table padding to make room for radio button */
    


    


    


    


    /* Clickable Answer Choices */
    table tr.answer-choice {
        cursor: pointer !important;
        transition: all 0.3s ease !important;
    }

    table tr.answer-choice:hover {
        background: #f8f9fa !important;
    }

    table tr.answer-choice td:first-child {
        position: relative !important;
        padding-left: 35px !important;
    }

    table tr.answer-choice td:first-child::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        border: 2px solid #999;
        border-radius: 50%;
        background: white;
        transition: all 0.2s ease;
        box-sizing: border-box;
    }

    table tr.answer-choice.selected td:first-child::before {
        border-color: #1a73e8;
        border-width: 5px;
    }

    table tr.answer-choice.selected {
        background: #e8f4ff !important;
    }

    table tr.answer-choice.selected td:first-child {
        color: #1a73e8 !important;
        font-weight: 600 !important;
    }


    


    /* Answer Validation Styles */
    tr.answer-choice.answer-correct {
        background: linear-gradient(90deg, #d4edda 0%, #c3e6cb 100%) !important;
        border: 3px solid #28a745 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3) !important;
    }

    tr.answer-choice.answer-correct td {
        color: #155724 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-correct td:first-child::before {
        border-color: #28a745 !important;
        background: #28a745 !important;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2) !important;
    }

    tr.answer-choice.answer-incorrect {
        background: linear-gradient(90deg, #f8d7da 0%, #f5c6cb 100%) !important;
        border: 3px solid #dc3545 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3) !important;
    }

    tr.answer-choice.answer-incorrect td {
        color: #721c24 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-incorrect td:first-child::before {
        border-color: #dc3545 !important;
        background: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2) !important;
    }


    /* Answer Validation Styles */
    tr.answer-choice.answer-correct {
        background: linear-gradient(90deg, #d4edda 0%, #c3e6cb 100%) !important;
        border: 3px solid #28a745 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3) !important;
    }

    tr.answer-choice.answer-correct td {
        color: #155724 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-correct td:first-child::before {
        border-color: #28a745 !important;
        background: #28a745 !important;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2) !important;
    }

    tr.answer-choice.answer-incorrect {
        background: linear-gradient(90deg, #f8d7da 0%, #f5c6cb 100%) !important;
        border: 3px solid #dc3545 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3) !important;
    }

    tr.answer-choice.answer-incorrect td {
        color: #721c24 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-incorrect td:first-child::before {
        border-color: #dc3545 !important;
        background: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2) !important;
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>







<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Communicate with parent window (if in iframe)
    function notifyParent(choice) {
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'choiceSelected',
                questionId: getQuestionId(),
                choice: choice
            }, '*');
        }
    }

    // Load saved choice from parent or localStorage
    function loadSavedChoice() {
        const questionId = getQuestionId();

        // Try to get from localStorage first
        const saved = localStorage.getItem('choice_q' + questionId);
        if (saved) {
            selectChoice(saved, false);
        }

        // Ask parent for saved choice (if in iframe)
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'getChoice',
                questionId: questionId
            }, '*');
        }
    }

    // Listen for messages from parent
    window.addEventListener('message', function(event) {
        if (event.data.type === 'setChoice' && event.data.questionId === getQuestionId()) {
            selectChoice(event.data.choice, false);
        }
    });

    // Select a choice
    function selectChoice(choice, notify = true) {
        if (!choice) return;

        const questionId = getQuestionId();

        // Remove previous selection
        document.querySelectorAll('tr.answer-choice').forEach(row => {
            row.classList.remove('selected');
        });

        // Add selection to clicked choice
        const choiceRow = document.querySelector(`tr.answer-choice[data-choice="${choice}"]`);
        if (choiceRow) {
            choiceRow.classList.add('selected');

            // Save to localStorage
            localStorage.setItem('choice_q' + questionId, choice);

            // Notify parent (if in iframe)
            if (notify) {
                notifyParent(choice);
            }
        }
    }

    // Initialize answer choices
    function initializeChoices() {
        // Find all answer choice rows (A, B, C, D, E, F, etc.)
        const choicePattern = /^[A-Z]\.$/;
        const tables = document.querySelectorAll('table.simple-table');

        tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            rows.forEach(row => {
                const firstCell = row.querySelector('td:first-child');
                if (firstCell && choicePattern.test(firstCell.textContent.trim())) {
                    const choice = firstCell.textContent.trim().replace('.', '');
                    row.classList.add('answer-choice');
                    row.setAttribute('data-choice', choice);
                    row.style.position = 'relative';

                    // Add click handler
                    row.addEventListener('click', function(e) {
                        // Don't trigger if clicking inside a link or button
                        if (e.target.tagName === 'A' || e.target.closest('a')) return;

                        // Toggle selection
                        if (this.classList.contains('selected')) {
                            this.classList.remove('selected');
                            const questionId = getQuestionId();
                            localStorage.removeItem('choice_q' + questionId);
                            notifyParent('');
                        } else {
                            selectChoice(choice);
                        }
                    });
                }
            });
        });

        // Load saved choice after a short delay
        setTimeout(loadSavedChoice, 100);
    }

    // Run when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeChoices);
    } else {
        initializeChoices();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);

                    // Notify parent that Submit/Explanation was opened
                    if (window.parent && window.parent !== window) {
                        window.parent.postMessage({
                            type: 'submitOpened',
                            questionId: getQuestionId()
                        }, '*');
                    }
                } else {
                    // Notify parent that Submit/Explanation was closed
                    if (window.parent && window.parent !== window) {
                        window.parent.postMessage({
                            type: 'submitClosed',
                            questionId: getQuestionId()
                        }, '*');
                    }
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>
